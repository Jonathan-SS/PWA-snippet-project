{
  "version": 3,
  "sources": ["browser-route-module:/Users/jonathanskovmose/Documents/GitHub/PWA-snippet-project/app/routes/snippets/$snippetTag/$snippetId.update.jsx?browser", "../../../../../app/routes/snippets/$snippetTag/$snippetId.update.jsx"],
  "sourcesContent": ["export { default } from \"/Users/jonathanskovmose/Documents/GitHub/PWA-snippet-project/app/routes/snippets/$snippetTag/$snippetId.update.jsx\";", "import { Form, redirect, json, useActionData, useLoaderData } from \"remix\";\nimport connectDb from \"~/db/connectDb.server\";\n\nexport async function loader({ params }) {\n  const db = await connectDb();\n  const snippet = await db.models.Snippet.findById(params.snippetId);\n  if (!snippet) {\n    throw new Response(`Couldn't find book with id ${params.snippetId}`, {\n      status: 404,\n    });\n  }\n  return json(snippet);\n}\n\nexport async function action({ request }) {\n  const form = await request.formData();\n  const title = form.get(\"title\");\n  const languageTag = form.get(\"languageTag\");\n  const description = form.get(\"description\");\n  const snippet = form.get(\"snippet\");\n  const snippetId = form.get(\"snippetId\");\n  const db = await connectDb();\n\n  try {\n    await db.models.Snippet.findOneAndUpdate(\n      { _id: snippetId },\n      {\n        $set: {\n          title: title,\n          languageTag: languageTag,\n          description: description,\n          snippet: snippet,\n        },\n        $currentDate: { lastModified: true },\n      }\n    );\n\n    return redirect(`/snippets/snippet/${snippetId}`);\n  } catch (error) {\n    return json(\n      { errors: error.errors, values: Object.fromEntries(form) },\n      { status: 400 }\n    );\n  }\n}\n\nexport default function CreateSnippet() {\n  const actionData = useActionData();\n\n  const snippetToUpdate = useLoaderData();\n  return (\n    <div className=\" w-full md:w-50-vw lg:ml-25-vw md:ml-30-vw md:pr-10 h-96 md:h-full overflow-y-scroll px-4 md:p-0 fixed scrollbar-hide\">\n      <h1 className=\"text-4xl font-bold mb-2  mr-2\">Update snippet</h1>\n      <Form method=\"post\">\n        <label htmlFor=\"title\" className=\"block text-xl font-semibold\">\n          Title\n        </label>\n        {actionData?.errors.title && (\n          <p className=\"text-red-500\">{actionData?.errors.title.message}</p>\n        )}\n        <input\n          type=\"text\"\n          name=\"title\"\n          defaultValue={snippetToUpdate.title}\n          style={{ width: \"66%\" }}\n          id=\"title\"\n          className={\n            actionData?.errors.title\n              ? \"border-2 border-red-500 rounded-lg px-2 bg-blue-600 text-white dark:text-black dark:bg-gray-700\"\n              : \" rounded-lg px-2 bg-blue-600 text-white   dark:bg-gray-700\"\n          }\n        />\n\n        <label\n          htmlFor=\"languageTag\"\n          className=\"block mt-3 text-xl font-semibold\"\n        >\n          Language\n        </label>\n        <select\n          defaultValue={snippetToUpdate.languageTag}\n          name=\"languageTag\"\n          className=\" bg-blue-600 text-white   dark:bg-gray-700\"\n        >\n          <option value=\"JavaScript\">JavaScript</option>\n          <option value=\"TypeScript\">TypeScript</option>\n          <option value=\"PHP\">PHP</option>\n          <option value=\"CSS\">CSS</option>\n          <option value=\"HTML\">HTML</option>\n        </select>\n        <label\n          htmlFor=\"description\"\n          className=\"block mt-3 text-xl font-semibold\"\n        >\n          Description\n        </label>\n\n        <textarea\n          name=\"description\"\n          style={{ height: \"100px\", width: \"66%\" }}\n          defaultValue={snippetToUpdate.description}\n          id=\"description\"\n          className={\n            actionData?.errors.description\n              ? \"border-2 border-red-500 rounded-lg px-2 dark:bg-gray-700 resize-none bg-blue-600 text-white dark:text-black \"\n              : \" rounded-lg  px-2 dark:bg-gray-700 resize-none bg-blue-600 text-white  \"\n          }\n        />\n        {actionData?.description && (\n          <p className=\"text-red-500\">\n            {actionData?.errors.description.message}\n          </p>\n        )}\n\n        <label htmlFor=\"snippet\" className=\"block mt-3 text-xl font-semibold\">\n          Snippet\n        </label>\n\n        <textarea\n          name=\"snippet\"\n          defaultValue={snippetToUpdate.snippet}\n          id=\"snippet\"\n          style={{ height: \"200px\", width: \"66%\" }}\n          className={\n            actionData?.errors.description\n              ? \"border-2 border-red-500 rounded-lg px-2 dark:bg-gray-700 resize-none bg-blue-600 text-white dark:text-black \"\n              : \" rounded-lg  px-2 dark:bg-gray-700 resize-none bg-blue-600 text-white \"\n          }\n        />\n        {actionData?.description && (\n          <p className=\"text-red-500\">\n            {actionData?.errors.description.message}\n          </p>\n        )}\n        <br />\n        <input type=\"hidden\" name=\"snippetId\" value={snippetToUpdate._id} />\n        <button\n          type=\"submit\"\n          className=\" dark:hover:bg-gray-600 dark:bg-gray-700 px-7 py-2 rounded-lg mt-3 text-xl font-semibold hover:bg-blue-600 bg-blue-800 text-white  \"\n        >\n          Save snippet\n        </button>\n      </Form>\n    </div>\n  );\n}\n"],
  "mappings": ";;;;;;;;;;;;;AAAA;;;ACAA;AACA,uBAAsB;AA6CP,yBAAyB;AACtC,QAAM,aAAa;AAEnB,QAAM,kBAAkB;AACxB,SACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,MAAD;AAAA,IAAI,WAAU;AAAA,KAAgC,mBAC9C,oCAAC,MAAD;AAAA,IAAM,QAAO;AAAA,KACX,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,IAAQ,WAAU;AAAA,KAA8B,UAG9D,YAAY,OAAO,SAClB,oCAAC,KAAD;AAAA,IAAG,WAAU;AAAA,KAAgB,YAAY,OAAO,MAAM,UAExD,oCAAC,SAAD;AAAA,IACE,MAAK;AAAA,IACL,MAAK;AAAA,IACL,cAAc,gBAAgB;AAAA,IAC9B,OAAO,EAAE,OAAO;AAAA,IAChB,IAAG;AAAA,IACH,WACE,YAAY,OAAO,QACf,oGACA;AAAA,MAIR,oCAAC,SAAD;AAAA,IACE,SAAQ;AAAA,IACR,WAAU;AAAA,KACX,aAGD,oCAAC,UAAD;AAAA,IACE,cAAc,gBAAgB;AAAA,IAC9B,MAAK;AAAA,IACL,WAAU;AAAA,KAEV,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAa,eAC3B,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAa,eAC3B,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAM,QACpB,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAM,QACpB,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAO,UAEvB,oCAAC,SAAD;AAAA,IACE,SAAQ;AAAA,IACR,WAAU;AAAA,KACX,gBAID,oCAAC,YAAD;AAAA,IACE,MAAK;AAAA,IACL,OAAO,EAAE,QAAQ,SAAS,OAAO;AAAA,IACjC,cAAc,gBAAgB;AAAA,IAC9B,IAAG;AAAA,IACH,WACE,YAAY,OAAO,cACf,iHACA;AAAA,MAGP,YAAY,eACX,oCAAC,KAAD;AAAA,IAAG,WAAU;AAAA,KACV,YAAY,OAAO,YAAY,UAIpC,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,IAAU,WAAU;AAAA,KAAmC,YAItE,oCAAC,YAAD;AAAA,IACE,MAAK;AAAA,IACL,cAAc,gBAAgB;AAAA,IAC9B,IAAG;AAAA,IACH,OAAO,EAAE,QAAQ,SAAS,OAAO;AAAA,IACjC,WACE,YAAY,OAAO,cACf,iHACA;AAAA,MAGP,YAAY,eACX,oCAAC,KAAD;AAAA,IAAG,WAAU;AAAA,KACV,YAAY,OAAO,YAAY,UAGpC,oCAAC,MAAD,OACA,oCAAC,SAAD;AAAA,IAAO,MAAK;AAAA,IAAS,MAAK;AAAA,IAAY,OAAO,gBAAgB;AAAA,MAC7D,oCAAC,UAAD;AAAA,IACE,MAAK;AAAA,IACL,WAAU;AAAA,KACX;AAAA;",
  "names": []
}
